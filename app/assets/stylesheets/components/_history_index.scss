/* ===== Página: Histórico de Serviços ===== */
.history-index {
  padding-block: 16px;

  .page-header{ display:flex; align-items:center; justify-content:space-between; margin-bottom: 12px; }
  .page-title{ margin:0; font-size:1.125rem; color:#92949b; font-weight:400; }

  .history-filters{
    background:#fff; border:1px solid var(--line, #e5e7eb); border-radius:12px;
    box-shadow: 0 2px 8px rgba(0,0,0,.03); padding:.75rem 1rem; margin-bottom:12px;

    .filters-row{ display:flex; flex-wrap:wrap; gap:10px 16px; align-items:flex-end; }
    .filters-group{ display:flex; flex-direction:column; gap:6px; min-width:180px; }
    .filters-group .label{ color: var(--muted, #6b7280); font-weight:600; font-size:.85rem; }
    .filters-group--wide{ min-width:280px; }
    .filters-actions{ margin-left:auto; display:flex; gap:8px; }
  }

  /* Dropdown de período */
  .date-dropdown{ position: relative; display: inline-block; }
  .date-dropdown__toggle{
    display:inline-flex; align-items:center; gap:8px;
    border:1px solid var(--line, #e5e7eb); background:#fff;
  }
  .date-dropdown__menu{
    position:absolute; top:calc(100% + 6px); left:0; z-index:1200; background:#fff;
    border:1px solid var(--line, #e5e7eb); border-radius:12px; box-shadow:0 8px 24px rgba(0,0,0,.08);
    padding:10px; width:520px; display:none;
  }
  .date-dropdown__menu.is-open{ display:block; }
  .date-dropdown__columns{ display:grid; grid-template-columns:190px 1fr; gap:12px; }
  .date-dropdown__left{ border-right:1px solid var(--line, #e5e7eb); padding-right:10px; }
  .preset-list{ display:flex; flex-direction:column; gap:6px; }
  .chip-btn{
    -webkit-appearance:none; appearance:none; cursor:pointer;
    border:1px solid var(--line, #e5e7eb); background:#fff; color:#111827;
    border-radius:999px; padding:6px 10px; font-size:.8125rem; line-height:1;
    transition: background .15s, border-color .15s, color .15s, transform .04s;
  }
  .chip-btn:hover{ background:rgba(0,0,0,.03); }
  .chip-btn:active{ transform: translateY(1px); }
  .chip-btn.is-active{ background:#ecfeff; border-color:#a5f3fc; color:#0e7490; }
  .date-dropdown__right .grid-2{ display:grid; grid-template-columns:1fr 1fr; gap:8px; }
  .date-dropdown__actions{ margin-top:10px; display:flex; gap:8px; justify-content:flex-end; }

  .filter-box{
    background:#fff; border:1px solid var(--line, #e5e7eb); border-radius:12px;
    padding:.5rem .75rem; box-shadow:0 2px 8px rgba(0,0,0,.03); margin-bottom:12px;
    code{ background:rgba(19,125,142,.06); color:#137d8e; padding:2px 6px; border-radius:6px; }
  }

  .card{ background:#fff; border:1px solid var(--line, #e5e7eb); border-radius:12px; box-shadow:0 2px 8px rgba(0,0,0,.03); }
  .card-body{ padding:1rem 1rem; }

  .list-group-item.history-item{ background:transparent; border:0; border-bottom:1px solid var(--line, #e5e7eb); }
  .list-group-item.history-item:last-child{ border-bottom:0; }

  .row-line{ display:flex; gap:12px; justify-content:space-between; align-items:flex-start; }
  .left{ min-width:0; }
  .right{ display:flex; gap:8px; align-items:center; }

  .title{ font-weight:600; color:#111827; display:flex; flex-wrap:wrap; gap:6px; }
  .chip{ display:inline-block; padding:2px 8px; border:1px solid var(--line, #e5e7eb); border-radius:999px; font-size:.75rem; line-height:1.1; color:#111827; background:#fff; }

  .meta{ color: var(--muted, #6b7280); font-size:.875rem; margin-top:2px; }
  .meta .label{ color: var(--muted, #6b7280); font-weight:600; margin-right:4px; }

  /* caret do accordion */
  .has-caret .caret-icon{ margin-left:.35rem; transition: transform .15s ease; }
  .has-caret[aria-expanded="true"] .caret-icon{ transform: rotate(180deg); }

  /* Detalhes mais “caprichados” */
  .history-details{
    border:1px solid var(--line, #e5e7eb); border-radius:12px; padding:12px;
    background:#fff;
  }
  .history-details .details-cards{
    display:grid; grid-template-columns: repeat(4, 1fr); gap:10px;
  }
  .history-details .dcard{
    background:#f9fafb; border:1px solid #e5e7eb; border-radius:10px; padding:10px;
    display:grid; grid-template-columns: 28px 1fr; grid-template-rows:auto auto;
    column-gap:10px; row-gap:2px;
    align-items:center; /* ✅ ícone + textos centralizados verticalmente */
  }
  .history-details .dcard i{
    grid-row: 1 / span 2;
    font-size:1rem; color:#137d8e;
    justify-self:center; align-self:center; /* ✅ centraliza dentro da coluna */
  }
  .history-details .dcard-title{ font-size:.75rem; color:#6b7280; }
  .history-details .dcard-value{ font-weight:400; color:#111827; } /* ✅ sem negrito */
  .history-details .dcard-value.total{ color:#0b5d6a; }
  .history-details .details-sep{ border:none; border-top:1px dashed #e5e7eb; margin:10px 0; }
  .history-details .details-meta{ display:grid; grid-template-columns: 1fr 1fr 1fr; gap:8px 14px; }
  .history-details .details-meta .label{ color:#6b7280; font-weight:600; margin-right:4px; }

  /* Status */
  .status-pill{
    border:1px solid var(--line, #e5e7eb); border-radius:999px; font-size:.75rem;
    padding:4px 10px; white-space:nowrap; background:#f8fafc;
  }
  .status-pill.is-pending  { background:#fffbeb; border-color:#fde68a; color:#92400e; }
  .status-pill.is-confirmed{ background:#eff6ff; border-color:#bfdbfe; color:#1e40af; }
  .status-pill.is-completed{ background:#ecfdf5; border-color:#d1fae5; color:#065f46; }
  .status-pill.is-canceled { background:#fef2f2; border-color:#fecaca; color:#991b1b; }
  .status-pill.is-no-show  { background:#fff7ed; border-color:#fed7aa; color:#9a3412; }

  .actions{ display:flex; gap:6px; }
  .actions .btn-light{ border:1px solid var(--line, #e5e7eb); background:#fff; }

  .empty{ color: var(--muted, #6b7280); }
}

/* Harmoniza com container padrão */
.container.py-4.history-index .page-header{ display:flex; align-items:center; justify-content:space-between; }
.container.py-4.history-index .page-title{ margin:0; font-size:1.125rem; color:#92949b; font-weight:400; }

/* ===== Correção de alinhamento vertical dos ícones no accordion ===== */
.history-details .details-cards{
  display:grid; grid-template-columns: repeat(4, 1fr); gap:10px;
}

.history-details .dcard{
  background:#f9fafb; border:1px solid #e5e7eb; border-radius:10px; padding:10px;
  display:grid; grid-template-columns: 28px 1fr; column-gap:10px;
  align-items:center; /* centraliza a coluna do ícone vs. a coluna do texto */
}

/* Ícone: sempre central absoluto na sua coluna */
.history-details .dcard i{
  font-size:1rem; color:#137d8e;
  justify-self:center; align-self:center;
  display:flex; align-items:center; justify-content:center;
  line-height:1;          /* elimina sobra vertical da fonte */
}

/* Bloco de texto: empilha título e valor e centraliza verticalmente */
.history-details .dcard-info{
  display:flex; flex-direction:column;
  justify-content:center; /* ✅ centraliza o conjunto título+valor */
  gap:2px;
}

/* Tipografia */
.history-details .dcard-title{ font-size:.75rem; color:#6b7280; margin:0; }
.history-details .dcard-value{ font-weight:400; color:#111827; margin:0; }
.history-details .dcard-value.total{ color:#0b5d6a; }

/* ===== Responsividade dos cards de detalhes ===== */
/* 4 colunas (default já definido acima) -> 2 colunas entre 576–991px -> 1 coluna < 576px */
/* ===== Responsividade (mesma especificidade da base) ===== */
@media (max-width: 991.98px){
  .history-index .history-details .details-cards { grid-template-columns: repeat(2, 1fr); }
  .history-index .history-details .details-meta   { grid-template-columns: 1fr 1fr; }
}
@media (max-width: 575.98px){
  .history-index .history-details .details-cards { grid-template-columns: 1fr; }
  .history-index .history-details .details-meta   { grid-template-columns: 1fr; }
  .history-index .history-details .dcard{
    grid-template-columns: 24px 1fr;
    padding: 10px 8px;
  }
}

/* ===== Barra de filtros fixa considerando a navbar fixed-top ===== */
.history-index{
  /* offset padrão (cai para 64px se --nav-h não existir) */
  --filters-sticky-top: calc(var(--nav-h, 64px) + 8px);
}

.history-index .history-filters{
  position: sticky;
  top: var(--filters-sticky-top);
  z-index: 1250;                 /* abaixo da navbar (1400/1500), acima da lista */
  background: #fff;
  box-shadow: 0 1px 0 rgba(0,0,0,.06), 0 6px 20px rgba(0,0,0,.04);
}

/* O dropdown de período precisa aparecer acima da própria barra sticky,
   mas ainda abaixo da navbar e dos dropdowns da navbar */
.history-index .date-dropdown__menu{
  z-index: 1350; /* navbar=1400, dropdown da navbar=1500 */
}

/* Quando navegamos pra âncoras (#results), evita ficar escondido sob a barra fixa */
#results{
  scroll-margin-top: calc(var(--filters-sticky-top) + 12px);
}

/* Em telas pequenas, um respiro extra opcional */
@media (max-width: 575.98px){
  .history-index{ --filters-sticky-top: calc(var(--nav-h, 64px) + 6px); }
}

/* Quando um modal Bootstrap está aberto, garanta que os filtros fiquem abaixo do backdrop */
body.modal-open .history-index .history-filters,
body.modal-open .history-index .filters-row,
body.modal-open .history-index .date-dropdown__menu {
  z-index: 1 !important;     /* backdrop = 1040, modal = 1050 */
  position: relative;         /* evita criar novo contexto alto por engano */
}

/* (opcional) se sua barra sticky tiver z-index alto, normalize o default */
.history-index .history-filters {
  z-index: 10;                /* algo baixo por padrão já resolve */
}

.modal-backdrop { z-index: 2000 !important; }
.modal { z-index: 2010 !important; }

/* chip de status: mesmo tamanho/tipografia da .chip */
.chip--status{
  /* herda o visual da .chip */
}

/* Cores por status — alinhadas à paleta */
.chip--status.is-pending  { background:#fffbeb; border-color:#fde68a; color:#92400e; font-weight: 500; }
.chip--status.is-confirmed{ background:#eff6ff; border-color:#bfdbfe; color:#1748a2; font-weight: 500;}  /* usa #1748a2 */
.chip--status.is-completed{ background:#ecfdf5; border-color:#d1fae5; color:#065f46; font-weight: 500;}
.chip--status.is-canceled { background:#fef2f2; border-color:#fecaca; color:#991b1b; font-weight: 500;}
.chip--status.is-no-show  { background:#fff7ed; border-color:#fed7aa; color:#9a3412; font-weight: 500;}

/* opcional */
.chip--status { white-space: nowrap; }
.chip--status small { opacity:.9; font-weight:500; }

.chip--status.is-rejected { background:#fdecec; border-color:#f6c2ce; color:#a61e4d; font-weight:500; }
